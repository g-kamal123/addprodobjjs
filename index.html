<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      td,th{
        font-size: 1.4rem;
        padding: 1rem;
      }
      input,label{
        font-size: 1.2rem;
        padding: 0.4em;
      }
    </style>
  </head>
  <body>
    <form
      action="#"
      style="display: table; border-collapse: separate; border-spacing: 15px"
      onsubmit="addProduct(event)"
    >
      <div style="display: table-row">
        <label style="display: table-cell">Product Id</label>
        <input style="display: table-cell" name="id" type="number" required />
      </div>
      <div style="display: table-row">
        <label style="display: table-cell">Product Name</label>
        <input style="display: table-cell" name="name" required />
      </div>
      <div style="display: table-row">
        <label style="display: table-cell">Product Price</label>
        <input style="display: table-cell" name="price" type="number" required />
      </div>
      <div style="display: table-row">
        <label style="display: table-cell">Product Quantity</label>
        <input style="display: table-cell" name="quantity" type="number" required />
      </div>
      <button type="submit" style="font-size: 1.8rem; padding: 0.5em; border: 1px solid black; cursor: pointer;">Add Product</button>
    </form>
    <table id="table"></table>
  </body>
  <script>
    const arr = [];
    const prototype = {
      id: "",
      name: "",
      price: 0,
      quantity: 0,
      dec: (i) => {if(arr[i].quantity>1) arr[i].quantity -= 1
      showproducts(arr)},
      inc: (i) => {arr[i].quantity += 1
      showproducts(arr)},
    };
    console.log(prototype);
    // console.log('aa')
    const addProduct = (event) => {
      event.preventDefault();
      // console.log('add')
      var flag = 0;
      arr.forEach((item) => {
        if (item.id == event.target.id.value) flag = 1;
      });
      if (flag) return;
      const product = Object.create(prototype);
      product.id = event.target.id.value;
      product.name = event.target.name.value;
      product.price = event.target.price.value;
      product.quantity = Number(event.target.quantity.value);
      arr.push(product);
      showproducts(arr);
    };
    const showproducts = (arr) => {
      // console.log(arr[0]);
      let print = `<tr><th>Id</th><th>Name</th><th>Price</th><th>Quantity</th></tr>`;
      arr.forEach(
        (item, i) =>
          (print += `<tr><td>${item.id}</td><td>${item.name}</td><td>${item.price}</td><td style="display:flex; gap:0.2rem"><button onclick=arr[${i}].dec(${i})>-</button>${item.quantity}<button onclick=arr[${i}].inc(${i})>+</button></td><td><button onclick=deletei(${i})>Delete</button></td></tr>`)
      );
      document.getElementById("table").innerHTML = print;
    };
    const deletei = (i)=>{
      delete arr[i]
      showproducts(arr)
    }
  </script>
</html>
